machine:
  node:
    version: 7.0.0

dependencies:
  override:
    - npm install --no-optional

test:
  override:
    - node_modules/eslint/bin/eslint.js .
    - npm test . -- --coverage

    # Test webpack compilation and ability to start a server without failure.
    - NODE_ENV=test npm start
  post:
    # Export coverage results as a build artifact and to CodeClimate.
    - cp -R coverage $CIRCLE_ARTIFACTS
    - npm install -g codeclimate-test-reporter
    - codeclimate-test-reporter < coverage/lcov.info
